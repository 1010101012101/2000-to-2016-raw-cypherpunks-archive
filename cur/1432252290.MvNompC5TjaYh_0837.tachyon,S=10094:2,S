From rswatjfet.org+caf_=rsw=jfet.org@gmail.com  Sun Nov  9 05:07:11 2014
Return-Path: <rswatjfet.org+caf_=rsw=jfet.org@gmail.com>
Received: from mail-pa0-f49.google.com (mail-pa0-f49.google.com [209.85.220.49])
	by antiproton.jfet.org (8.14.4/8.14.4/Debian-4.1) with ESMTP id sA9A79Pp014058
	(version=TLSv1/SSLv3 cipher=RC4-SHA bits=128 verify=NOT)
	for <rsw@jfet.org>; Sun, 9 Nov 2014 05:07:10 -0500
Authentication-Results: antiproton.jfet.org; dkim=pass
	reason="2048-bit key; unprotected key"
	header.d=gmail.com header.i=@gmail.com header.b=eEizmWD3;
	dkim-adsp=pass; dkim-atps=neutral
Received: by mail-pa0-f49.google.com with SMTP id lj1so6277478pab.22
        for <rsw@jfet.org>; Sun, 09 Nov 2014 02:07:04 -0800 (PST)
X-Received: by 10.68.111.37 with SMTP id if5mr22467pbb.140.1415527624308;
        Sun, 09 Nov 2014 02:07:04 -0800 (PST)
X-Forwarded-To: rsw@jfet.org
X-Forwarded-For: rswatjfet.org@gmail.com rsw@jfet.org
Delivered-To: rswatjfet.org@gmail.com
Received: by 10.70.135.1 with SMTP id po1csp451885pdb;
        Sun, 9 Nov 2014 02:07:03 -0800 (PST)
X-Received: by 10.70.27.225 with SMTP id w1mr24819034pdg.40.1415527623142;
        Sun, 09 Nov 2014 02:07:03 -0800 (PST)
Received: from localhost (antiproton.jfet.org. [209.141.47.85])
        by mx.google.com with ESMTPS id bd2si13802347pdb.19.2014.11.09.02.07.01
        for <rswATjfet.org@gmail.com>
        (version=TLSv1.2 cipher=RC4-SHA bits=128/128);
        Sun, 09 Nov 2014 02:07:01 -0800 (PST)
Received-SPF: neutral (google.com: 209.141.47.85 is neither permitted nor denied by domain of rsw+cypherpunks-bounces=cpunks.org@gloop.phonon.net) client-ip=209.141.47.85;
Authentication-Results: mx.google.com;
       spf=neutral (google.com: 209.141.47.85 is neither permitted nor denied by domain of rsw+cypherpunks-bounces=cpunks.org@gloop.phonon.net) smtp.mail=rsw+cypherpunks-bounces=cpunks.org@gloop.phonon.net;
       dkim=pass header.i=@gmail.com;
       dmarc=pass (p=NONE dis=NONE) header.from=gmail.com
Received: from antiproton.jfet.org (localhost.localdomain [127.0.0.1])
	by antiproton.jfet.org (8.14.4/8.14.4/Debian-4.1) with ESMTP id sA9A5ir5014025;
	Sun, 9 Nov 2014 05:05:51 -0500
Received: from mail-lb0-f177.google.com (mail-lb0-f177.google.com
 [209.85.217.177])
 by antiproton.jfet.org (8.14.4/8.14.4/Debian-4.1) with ESMTP id sA9A5edB014021
 (version=TLSv1/SSLv3 cipher=RC4-SHA bits=128 verify=NOT)
 for <cypherpunks@cpunks.org>; Sun, 9 Nov 2014 05:05:42 -0500
Received: by mail-lb0-f177.google.com with SMTP id u10so1319746lbd.36
 for <cypherpunks@cpunks.org>; Sun, 09 Nov 2014 02:05:33 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
 h=mime-version:in-reply-to:references:date:message-id:subject:from:to
 :content-type; bh=bxaVP2jXnCQg6zWBWKroDmQEzD4dW3t84Xj44msFpqo=;
 b=eEizmWD3f0KnGDm2A3JTDpfB0r1FvyN4tIm5hh2tktRGqIZtCeGtVHdObgsi2PjpRq
 ccJ5C3V2XZ32jILmSSeaLEo0yviFps5ZuzyxP5yKcNdmrJZg0nYjcoRfDRVkgXxC0dzI
 E9BdtcNB6ReMO4JEjEQozSomPuMANBy2O4AWbNPCPvhw2e8bOWFgFx/VuWTcT7X8KR6R
 k7RJ8N4CWXoNsojl1C5jL6Gu566oyxkEcwx6z/pKBQlnOBjQCR76FO6T4LBYW7dPmBAB
 fN3QiylKPSo352swJHgNF5gsgleS43ShTSVXBOmnRykOh2fCav+V8YhHAmcEDnpy1tfn
 EfAQ==
MIME-Version: 1.0
X-Received: by 10.112.12.35 with SMTP id v3mr1600153lbb.80.1415527533416; Sun,
 09 Nov 2014 02:05:33 -0800 (PST)
Received: by 10.112.156.225 with HTTP; Sun, 9 Nov 2014 02:05:33 -0800 (PST)
In-Reply-To: <CAJVRA1Qc_oDPMyiTKKETqqRrWkTK3j8qwi37ELhOk2xVTyvxqg@mail.gmail.com>
References: <CAJVRA1Qc_oDPMyiTKKETqqRrWkTK3j8qwi37ELhOk2xVTyvxqg@mail.gmail.com>
Date: Sun, 9 Nov 2014 02:05:33 -0800
Message-ID: <CAJVRA1RL4m-RvwwPUg+KwC34GnnLXVyVPpSauqNGZL1-8A6ATw@mail.gmail.com>
Subject: Fwd: insufficient hidden service performance is potential
 de-anonymizing DoS [was Re: [tor-dev] yes hello, internet supervillain here]
To: cpunks <cypherpunks@cpunks.org>
Content-Type: text/plain; charset=UTF-8
X-BeenThere: cypherpunks@cpunks.org
X-Mailman-Version: 2.1.18
Precedence: list
List-Id: The Cypherpunks Mailing List <cypherpunks.cpunks.org>
List-Unsubscribe: <https://cpunks.org/mailman/options/cypherpunks>,
 <mailto:cypherpunks-request@cpunks.org?subject=unsubscribe>
List-Archive: <http://cpunks.org/pipermail/cypherpunks/>
List-Post: <mailto:cypherpunks@cpunks.org>
List-Help: <mailto:cypherpunks-request@cpunks.org?subject=help>
List-Subscribe: <https://cpunks.org/mailman/listinfo/cypherpunks>,
 <mailto:cypherpunks-request@cpunks.org?subject=subscribe>
Errors-To: cypherpunks-bounces@cpunks.org
Sender: "cypherpunks" <cypherpunks-bounces@cpunks.org>
From: coderman <coderman@gmail.com>
X-Gspam-Loop: antiproton.jfet.org
Status: O
Content-Length: 5448
Lines: 132

---------- Forwarded message ----------
From: coderman <coderman@gmail.com>
Date: Sun, 9 Nov 2014 02:04:59 -0800
Subject: insufficient hidden service performance is potential
de-anonymizing DoS [was Re: [tor-dev] yes hello, internet supervillain
here]

thanks for the transparency, nachash! i am putting this conversation
on tor-talk, since my replies are more noise and less dev, and the
details seem to be around Tor use and configuration.


On 11/8/14, Fears No One <nachash@observers.net> wrote:
> ... Another regret is that pcaps weren't taken, but we both made
> the mistake of assuming that because the DoS was mitigated that nothing
> that was preserved would be all that important anymore. If there was
> more to give, we would have been released it.

the pcap dumps would have been most useful, as the access logs only
identify state transitions. these types of attacks likely utilized
many concurrent requests (perhaps just sending a few bytes of the
request string at once, bit by bit, until a request is complete)

performance analysis and tuning of internet sytems is difficult, and
even more so in this context!  (and performance in anonymity systems
is easily reversed for de-anonymizing DoS)

Andrea's distribution shows this type of behavior, as i would expect it:
https://people.torproject.org/~andrea/loldoxbin-logs/analysis/length_distribution.txt
e.g. send small bits to keep connection active and not closed by
server side client send timeouts, then around 900-1000 chars call it
good and finalize the request.

this may be application of slowloris type DoS to "encourage" HS
operator to use a vulnerable path, or confirm via side channel. (you
stated your web server bound to localhost, so the obvious ones you
avoided at least :)



> The box was an OpenVZ VPS (Essentially a glorified chroot jail, for
> those who are unfamiliar)), so no, there was no physical hardware from
> my standpoint. Thus, full disk crypto wasn't really an option. From the
> standpoint of someone with root access to a dedi with OpenVZ vms,
> finding hidden services that are hosted by customers is a matter of
> looking for files named private_key anywhere under the /vz folder.

of all the virtualization environments, i dislike OpenVZ the most. i
dislike all virtual hosting, however, so don't assume this is a vote
for Docker ;)

pay the extra for dedi on bare metal!



> Neither of us are rolling in fake internet money like the drug market
> operators (Hint: This should indicate to anyone thinking of asking if we
> ran bitcoind that we didn'), so the other alternatives were to either
> use rooted boxes or flip a coin to decide who gets to host from home.

ok, maybe a dedi not an option if you're that tight for cash... :/



> ...  As was the tradition with doxbin boxes, the registration info
> usually either went back to ... Keith Alexander...

i find this amusing! my only suggestion is that you incorporate his nickname,
 Keith "Cowboy" Alexander



> I don't have an exact time, but by around 13:00 UTC or so on the 6th,
> the box was down. When the Silk Road 2.0 seizure news broke, doxbin was
> already gone. I checked the most current doxbin onion and attempted to
> ssh into the box every couple of hours for around the first 24 hours,
> until a friend pointed out that one of the old doxbin onions was serving
> up the Silk Road 2.0 seizure page. At the time, the main onion was
> serving up some 404 page (Which I expected to eventually point to some
> sort of honeypot, but the pigs really let me down on that one), while
> other onions were unresponsive. This had changed by the next day, when
> all the onions from the doxbin box were pointed to the seizure page. The
> speculation has been that the cops were adding onions one at a time, and
> my personal experience supports that. Police who are dedicated to
> seizing and taking control of hidden services are still struggling with
> managing a torrc file efficiently. Go figure.

yup. hence slappy fights over the HSDir descriptor publishing is going
to be effective for who knows how long...



> There was some downtime on the box maybe a month ago, which I originally
> thought was when it got imaged pre-seizure, once all this drama began. I
> can't look at the access log report numbers and say "This is the date,
> because there's a huge dip in traffic" so I'm going to have to get back
> with you on that. The fact that they were adding onions to the seizure
> box over 24 hours after the takendown might suggest that they for some
> reason didn't image it beforehand, which would be a curious break from
> their habits as laid out in past criminal complaints.

this was an international effort, so perhaps just one hand not talking
to the other, is the only conclusion to be drawn.



> An update: All of the access log reports ever generated for doxbin can
> be now be downloaded from the URLs in my initial e-mail. Other people
> wanted some of them to compare to the DoS log reports, so now they can
> pick their own control group.

thanks for this, while not as useful as PCAPs with headers, it is still useful!



> P.S. Neither of us have been arrested or have even noticed any signs of
> in-person heat (Cleaning vans, new neighbors, etc), which also seems to
> point to the doxbin seizure being half-cocked.

how would you know what covert heat looks like?
*grin*



> Here until I'm in handcuffs,

don't plea out!

P.S. public key?


best regards,

