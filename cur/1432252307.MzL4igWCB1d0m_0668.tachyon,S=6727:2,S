From rswatjfet.org+caf_=rsw=jfet.org@gmail.com  Thu Feb 19 19:36:48 2015
Return-Path: <rswatjfet.org+caf_=rsw=jfet.org@gmail.com>
Received: from mail-pa0-f52.google.com (mail-pa0-f52.google.com [209.85.220.52])
	by antiproton.jfet.org (8.14.4/8.14.4/Debian-4.1) with ESMTP id t1K0al4q007598
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NOT)
	for <rsw@jfet.org>; Thu, 19 Feb 2015 19:36:48 -0500
Authentication-Results: antiproton.jfet.org; dkim=pass
	reason="1024-bit key; unprotected key"
	header.d=riseup.net header.i=@riseup.net header.b=EtBhGeoI;
	dkim-adsp=pass; dkim-atps=neutral
Received: by paceu11 with SMTP id eu11so3686839pac.10
        for <rsw@jfet.org>; Thu, 19 Feb 2015 16:36:41 -0800 (PST)
X-Received: by 10.68.137.71 with SMTP id qg7mr12128253pbb.115.1424392601724;
        Thu, 19 Feb 2015 16:36:41 -0800 (PST)
X-Forwarded-To: rsw@jfet.org
X-Forwarded-For: rswatjfet.org@gmail.com rsw@jfet.org
Delivered-To: rswatjfet.org@gmail.com
Received: by 10.70.127.72 with SMTP id ne8csp778814pdb;
        Thu, 19 Feb 2015 16:36:40 -0800 (PST)
X-Received: by 10.66.156.35 with SMTP id wb3mr12298108pab.70.1424392600363;
        Thu, 19 Feb 2015 16:36:40 -0800 (PST)
Received: from localhost (antiproton.jfet.org. [209.141.47.85])
        by mx.google.com with ESMTPS id mj2si30130400pdb.81.2015.02.19.16.36.40
        for <rswATjfet.org@gmail.com>
        (version=TLSv1.2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);
        Thu, 19 Feb 2015 16:36:40 -0800 (PST)
Received-SPF: neutral (google.com: 209.141.47.85 is neither permitted nor denied by domain of rsw+cypherpunks-bounces=cpunks.org@gloop.phonon.net) client-ip=209.141.47.85;
Authentication-Results: mx.google.com;
       spf=neutral (google.com: 209.141.47.85 is neither permitted nor denied by domain of rsw+cypherpunks-bounces=cpunks.org@gloop.phonon.net) smtp.mail=rsw+cypherpunks-bounces=cpunks.org@gloop.phonon.net;
       dkim=pass header.i=@riseup.net
Received: from antiproton.jfet.org (localhost.localdomain [127.0.0.1])
	by antiproton.jfet.org (8.14.4/8.14.4/Debian-4.1) with ESMTP id t1K0ZlJm007576;
	Thu, 19 Feb 2015 19:35:51 -0500
Received: from mx1.riseup.net (mx1.riseup.net [198.252.153.129])
 by antiproton.jfet.org (8.14.4/8.14.4/Debian-4.1) with ESMTP id t1K0Zhlq007572
 (version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-GCM-SHA384 bits=256 verify=NOT)
 for <cypherpunks@cpunks.org>; Thu, 19 Feb 2015 19:35:45 -0500
Received: from berryeater.riseup.net (berryeater-pn.riseup.net [10.0.1.120])
 (using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
 (Client CN "*.riseup.net",
 Issuer "COMODO RSA Domain Validation Secure Server CA" (verified OK))
 by mx1.riseup.net (Postfix) with ESMTPS id 4E5CE41AB4
 for <cypherpunks@cpunks.org>; Fri, 20 Feb 2015 00:35:43 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=riseup.net; s=squak;
 t=1424392543; bh=Xepwi5DrCEgBlF9Omi+gr7wLoCWhgZvCC3OQ7uLF10M=;
 h=Date:From:To:Subject:References:In-Reply-To:From;
 b=EtBhGeoILrqTyrHUHlUBRY+87IsczmnW8z9fk2Nrufbk7osW+Jqn4YO2sZ1INWtwx
 ZShl3cdgJLViHeMUc+XOvtwMz7ni5rumpvwRNKeWDoRH7QkFbrJ238PqKlC0fPwYdS
 UuvJQGK2i6fStNV3BoPs+vwdrMvqSk2+pl3+nrsY=
Received: from [127.0.0.1] (localhost [127.0.0.1])
 (Authenticated sender: mirimir) with ESMTPSA id 7DF1F400E0
Message-ID: <54E6815F.1050402@riseup.net>
Date: Thu, 19 Feb 2015 17:35:43 -0700
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
 rv:31.0) Gecko/20100101 Thunderbird/31.4.0
MIME-Version: 1.0
To: cypherpunks@cpunks.org
Subject: Re: [Cryptography] trojans in the firmware
References: <E1YNSQU-0004pW-Oh@elasmtp-kukur.atl.sa.earthlink.net>
 <E3B30770-BB81-47F1-895D-14CF7FCFC0BE@lrw.com> <54E2B04C.9080707@av8n.com>
 <E1YNuOT-0004uN-CV@elasmtp-mealy.atl.sa.earthlink.net>
 <54E436FB.9000709@deadhat.com>
 <CAAMy4USCzQDO=k3yhZ_LVb4ivz4k5qTCasm3KCen+y1yi8oa+w@mail.gmail.com>
 <CAD2Ti29bD6f7tTq=FgGQDXD43C+zTW0fOWYrbCeTCBmiu0bBqA@mail.gmail.com>
 <E1YOGNA-0004BG-UT@elasmtp-banded.atl.sa.earthlink.net>
 <CAD2Ti2-TTAAUjJsAfLvkDs_tjUKizyGOYATgddpLQvoYZYTFgQ@mail.gmail.com>
 <54E58DF6.2020802@riseup.net>
 <CAD2Ti2_T0P=vw11ipZHBHKwbkM7uP4xdtkBZMNVftLwPK5gXtA@mail.gmail.com>
In-Reply-To: <CAD2Ti2_T0P=vw11ipZHBHKwbkM7uP4xdtkBZMNVftLwPK5gXtA@mail.gmail.com>
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 8bit
X-Virus-Scanned: clamav-milter 0.98.5 at mx1
X-Virus-Status: Clean
X-BeenThere: cypherpunks@cpunks.org
X-Mailman-Version: 2.1.18
Precedence: list
List-Id: The Cypherpunks Mailing List <cypherpunks.cpunks.org>
List-Unsubscribe: <https://cpunks.org/mailman/options/cypherpunks>,
 <mailto:cypherpunks-request@cpunks.org?subject=unsubscribe>
List-Archive: <http://cpunks.org/pipermail/cypherpunks/>
List-Post: <mailto:cypherpunks@cpunks.org>
List-Help: <mailto:cypherpunks-request@cpunks.org?subject=help>
List-Subscribe: <https://cpunks.org/mailman/listinfo/cypherpunks>,
 <mailto:cypherpunks-request@cpunks.org?subject=subscribe>
Errors-To: cypherpunks-bounces@cpunks.org
Sender: "cypherpunks" <cypherpunks-bounces@cpunks.org>
From: Mirimir <mirimir@riseup.net>
X-Gspam-Loop: antiproton.jfet.org
Status: O
Content-Length: 1605
Lines: 32

On 02/19/2015 03:58 PM, grarpamp wrote:
> On Thu, Feb 19, 2015 at 2:17 AM, Mirimir <mirimir@riseup.net> wrote:
>> https://www.virtualbox.org/manual/ch09.html#rawdisk
>>
>> Given that, I'm assuming that when using VDIs, the host OS doesn't allow
>> VMs to directly access physical disks. And I don't see how a VM could
>> reconfigure itself for raw hard disk access to the host disk, because
>> doing so would such access to its own config.
> 
> The link is saying different than that.
> VM VDI is just a backing file on the host OS FS, opcodes likely fail here,
> note in link how VM supplies fake disk VPD to guest OS.
> Host OS often runs VM as root and even may assist by loading VM kernel module.

VirtualBox in Linux doesn't require root rights. I just checked htop on
the host, and all VM processes are running as user. And visudo shows
nothing about VirtualBox.

> VM's can thus passthrough host OS devices to guest OS if so configured,
> and if so, VM probably does not filter any opcodes, particularly if
> passing an entire physical disk.

How would I test that? I suppose that I could setup a VM to boot from an
HDD, and then see if I can flash the HDD's firmware. But I'm not the
NSA, and so only success would be probative. But hey, I'll take a shot.

> Also consider what VT-d is doing regarding sharing physical devices.
> So you'd still want opcode filtering in kernel in those cases.

I see that VirtualBox can use VT-d passthrough for PCI devices, such as
NICs, and maybe displays. But don't see any mention of VT-d for disks
and CD/DVD. I do see that QEMU can do more of that, however.

