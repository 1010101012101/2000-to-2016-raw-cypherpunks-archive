From rswatjfet.org+caf_=rsw=jfet.org@gmail.com  Wed Apr 15 16:10:15 2015
Return-Path: <rswatjfet.org+caf_=rsw=jfet.org@gmail.com>
Received: from mail-pa0-f48.google.com (mail-pa0-f48.google.com [209.85.220.48])
	by antiproton.jfet.org (8.14.4/8.14.4/Debian-4.1) with ESMTP id t3FKADVj006330
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NOT)
	for <rsw@jfet.org>; Wed, 15 Apr 2015 16:10:14 -0400
Authentication-Results: antiproton.jfet.org; dkim=pass
	reason="1024-bit key; unprotected key"
	header.d=riseup.net header.i=@riseup.net header.b=BjkeYNZ5;
	dkim-adsp=pass; dkim-atps=neutral
Received: by pabsx10 with SMTP id sx10so62295843pab.3
        for <rsw@jfet.org>; Wed, 15 Apr 2015 13:10:08 -0700 (PDT)
X-Received: by 10.70.88.137 with SMTP id bg9mr50160570pdb.92.1429128608095;
        Wed, 15 Apr 2015 13:10:08 -0700 (PDT)
X-Forwarded-To: rsw@jfet.org
X-Forwarded-For: rswatjfet.org@gmail.com rsw@jfet.org
Delivered-To: rswatjfet.org@gmail.com
Received: by 10.70.72.137 with SMTP id d9csp2747471pdv;
        Wed, 15 Apr 2015 13:10:07 -0700 (PDT)
X-Received: by 10.68.225.99 with SMTP id rj3mr46227735pbc.54.1429128606861;
        Wed, 15 Apr 2015 13:10:06 -0700 (PDT)
Received: from localhost (antiproton.jfet.org. [209.141.47.85])
        by mx.google.com with ESMTPS id hv8si8574854pdb.173.2015.04.15.13.10.04
        for <rswATjfet.org@gmail.com>
        (version=TLSv1.2 cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128);
        Wed, 15 Apr 2015 13:10:05 -0700 (PDT)
Received-SPF: neutral (google.com: 209.141.47.85 is neither permitted nor denied by domain of rsw+cypherpunks-bounces=cpunks.org@gloop.phonon.net) client-ip=209.141.47.85;
Authentication-Results: mx.google.com;
       spf=neutral (google.com: 209.141.47.85 is neither permitted nor denied by domain of rsw+cypherpunks-bounces=cpunks.org@gloop.phonon.net) smtp.mail=rsw+cypherpunks-bounces=cpunks.org@gloop.phonon.net;
       dkim=pass header.i=@riseup.net
Received: from antiproton.jfet.org (localhost.localdomain [127.0.0.1])
	by antiproton.jfet.org (8.14.4/8.14.4/Debian-4.1) with ESMTP id t3FK9HkT006297;
	Wed, 15 Apr 2015 16:09:20 -0400
Received: from mx1.riseup.net (mx1.riseup.net [198.252.153.129])
 by antiproton.jfet.org (8.14.4/8.14.4/Debian-4.1) with ESMTP id t3FK9EPi006293
 (version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-GCM-SHA384 bits=256 verify=NOT)
 for <cypherpunks@cpunks.org>; Wed, 15 Apr 2015 16:09:15 -0400
Received: from berryeater.riseup.net (berryeater-pn.riseup.net [10.0.1.120])
 (using TLSv1 with cipher ECDHE-RSA-AES256-SHA (256/256 bits))
 (Client CN "*.riseup.net",
 Issuer "COMODO RSA Domain Validation Secure Server CA" (verified OK))
 by mx1.riseup.net (Postfix) with ESMTPS id 76C684141E
 for <cypherpunks@cpunks.org>; Wed, 15 Apr 2015 20:09:13 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=riseup.net; s=squak;
 t=1429128553; bh=W8nkB0Jls72DtoHAThOtM7B5ElbI2V9/sAcF4bjafsQ=;
 h=Date:From:To:Subject:From;
 b=BjkeYNZ5VUOhQHbkRgmiVzNyIOtmW8zbAx8+DRYsEwSlU9lo02+YMcjSyO+Xo/F/X
 48J06tbUjEK1yCZoc/YRYMudEBgM99TG6tXHyfVQF3gfYazft94TyIUWg/OtYR7nxi
 +CVk3PvS64ZLeP+81QlSJKypktMKppisNWPyYtKg=
Received: from [127.0.0.1] (localhost [127.0.0.1])
 (Authenticated sender: mirimir) with ESMTPSA id 9F9674209C
Message-ID: <552EC56B.3040808@riseup.net>
Date: Wed, 15 Apr 2015 14:09:15 -0600
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
 rv:31.0) Gecko/20100101 Thunderbird/31.6.0
MIME-Version: 1.0
To: cpunks <cypherpunks@cpunks.org>
Subject: Whonix-like setup using Raspberry Pi 2
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: clamav-milter 0.98.6 at mx1
X-Virus-Status: Clean
X-BeenThere: cypherpunks@cpunks.org
X-Mailman-Version: 2.1.18
Precedence: list
List-Id: The Cypherpunks Mailing List <cypherpunks.cpunks.org>
List-Unsubscribe: <https://cpunks.org/mailman/options/cypherpunks>,
 <mailto:cypherpunks-request@cpunks.org?subject=unsubscribe>
List-Archive: <http://cpunks.org/pipermail/cypherpunks/>
List-Post: <mailto:cypherpunks@cpunks.org>
List-Help: <mailto:cypherpunks-request@cpunks.org?subject=help>
List-Subscribe: <https://cpunks.org/mailman/listinfo/cypherpunks>,
 <mailto:cypherpunks-request@cpunks.org?subject=subscribe>
Errors-To: cypherpunks-bounces@cpunks.org
Sender: "cypherpunks" <cypherpunks-bounces@cpunks.org>
From: Mirimir <mirimir@riseup.net>
X-Gspam-Loop: antiproton.jfet.org

I've implemented physical isolation of networking (VPN plus Tor) and
workspace, using two Raspberry Pi 2 Model B v1.1 ARM-based
microcomputers.[0] Missing packages in Raspbian wheezy prevent building
Whonix on the Pi, and so I've replicated basic design features.

The gateway Pi connects to the Tor network through a VPN service, and
then reaches the Internet through Tor. Firewall rules allow outgoing
connections on WAN (eth0) only to the VPN servers, Raspbian wheezy
repository servers and NTP timeservers. No DNS servers are reachable via
WAN (eth0) and so all needed IPs are provided locally. Firewall rules
allow outgoing connections on the VPN tunnel interface (tun0) only by
the Tor client process. The Tor Browser and other apps on the workspace
Pi can reach the Internet only through the Tor client process on the
gateway Pi.

Both gateway and workspace employ full-disk encryption, using standard
Linux dm-crypt/LUKS plus LVM2. The LUKS volume on the gateway Pi can
only be unlocked via SSH (dropbear) from the workspace Pi. That protects
VPN credentials and any Tor hidden-service keys while the gateway Pi is
shutdown.

Next steps will include adding apps to the workspace, and hardening. I'm
looking at EMF shielding both networking Pi and workspace Pi, and
embedding the boards in Arctic Alumina.[1] The gateway Pi will have no
exposed USB or HDMI ports, just power and the two ethernet ports. And of
course, I'll test for leaks, both networking and EMF side-channel.[2]
Firmware flashing is another vulnerability that needs to be addressed.

I'd appreciate feedback, criticism and suggestions.

[0]
http://lwcl5doqq2uzjmom.onion/Raspian-wheezy-VPN-Tor-Gateway-Workspace-r0.html.
[1]
http://www.amazon.com/Arctic-Alumina-Thermal-Adhesive-5g/dp/B0009IQ1BU/ref=sr_1_1?ie=UTF8&qid=1426546059
[2]
http://www.techrepublic.com/article/computer-stored-encryption-keys-are-not-safe-from-side-channel-attacks/

