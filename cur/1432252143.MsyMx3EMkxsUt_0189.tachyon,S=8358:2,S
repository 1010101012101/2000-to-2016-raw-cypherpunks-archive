From rswatjfet.org+caf_=rsw=jfet.org@gmail.com  Tue Jul 22 18:59:43 2014
Return-Path: <rswatjfet.org+caf_=rsw=jfet.org@gmail.com>
Received: from mail-pa0-f53.google.com (mail-pa0-f53.google.com [209.85.220.53])
	by antiproton.jfet.org (8.14.4/8.14.4/Debian-4.1) with ESMTP id s6MMxf7A006392
	(version=TLSv1/SSLv3 cipher=RC4-SHA bits=128 verify=NOT)
	for <rsw@jfet.org>; Tue, 22 Jul 2014 18:59:43 -0400
Authentication-Results: antiproton.jfet.org; dkim=pass
	reason="2048-bit key; unprotected key"
	header.d=gmail.com header.i=@gmail.com header.b=PHb0kmzr;
	dkim-adsp=pass; dkim-atps=neutral
Received: by mail-pa0-f53.google.com with SMTP id kq14so423647pab.26
        for <rsw@jfet.org>; Tue, 22 Jul 2014 15:59:33 -0700 (PDT)
X-Received: by 10.69.18.11 with SMTP id gi11mr14931718pbd.40.1406069973146;
        Tue, 22 Jul 2014 15:59:33 -0700 (PDT)
X-Forwarded-To: rsw@jfet.org
X-Forwarded-For: rswatjfet.org@gmail.com rsw@jfet.org
Delivered-To: rswatjfet.org@gmail.com
Received: by 10.70.3.197 with SMTP id e5csp79159pde;
        Tue, 22 Jul 2014 15:59:32 -0700 (PDT)
X-Received: by 10.68.251.201 with SMTP id zm9mr27215538pbc.22.1406069972035;
        Tue, 22 Jul 2014 15:59:32 -0700 (PDT)
Received: from localhost (antiproton.jfet.org. [209.141.47.85])
        by mx.google.com with ESMTPS id su6si423539pab.177.2014.07.22.15.59.31
        for <rswATjfet.org@gmail.com>
        (version=TLSv1.2 cipher=RC4-SHA bits=128/128);
        Tue, 22 Jul 2014 15:59:32 -0700 (PDT)
Received-SPF: neutral (google.com: 209.141.47.85 is neither permitted nor denied by domain of rsw+cypherpunks-bounces=cpunks.org@gloop.phonon.net) client-ip=209.141.47.85;
Authentication-Results: mx.google.com;
       spf=neutral (google.com: 209.141.47.85 is neither permitted nor denied by domain of rsw+cypherpunks-bounces=cpunks.org@gloop.phonon.net) smtp.mail=rsw+cypherpunks-bounces=cpunks.org@gloop.phonon.net;
       dkim=pass header.i=@gmail.com;
       dmarc=pass (p=NONE dis=NONE) header.from=gmail.com
Received: from antiproton.jfet.org (localhost.localdomain [127.0.0.1])
	by antiproton.jfet.org (8.14.4/8.14.4/Debian-4.1) with ESMTP id s6MMwSWK006374;
	Tue, 22 Jul 2014 18:58:37 -0400
Received: from mail-qa0-f47.google.com (mail-qa0-f47.google.com
 [209.85.216.47])
 by antiproton.jfet.org (8.14.4/8.14.4/Debian-4.1) with ESMTP id s6MMwPKM006370
 (version=TLSv1/SSLv3 cipher=RC4-SHA bits=128 verify=NOT)
 for <cypherpunks@cpunks.org>; Tue, 22 Jul 2014 18:58:26 -0400
Received: by mail-qa0-f47.google.com with SMTP id i13so416517qae.6
 for <cypherpunks@cpunks.org>; Tue, 22 Jul 2014 15:58:16 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
 h=mime-version:in-reply-to:references:date:message-id:subject:from:to
 :content-type; bh=Hn5QVWCC5HrT6Tv2+PFAYzi0JrufxiehihQGHFa8STY=;
 b=PHb0kmzrTeS4K82XN8vX2WR+8nt9cjzL1LdztqJ7QaISBk8bWea58yMYEbVGIcaMEF
 LN4YEIyxVOeS7mxUfxw6laTpDYbCNOI+j+WtWlsfBURR9JHK9OL2uuU6fKjgnoEBKUZO
 wv2dqH8h05C6SlQ3VL5W2zmMFd+9n+AEaM4dcpV7DsBZ1mE7egvLNv+K+al6fkoFMJvL
 StokWm/mgNTBejBXFDScE11jCxftGMzrCpxppil78NiVgKmrBOaRxGlXaQofHW9QroUk
 SPibDZsTqovD9WRR+RFb363tXqcG2uc0THn6xvfH7VbCISWobPCJ0zIxq+Oo7zZoGdL0
 HGqA==
MIME-Version: 1.0
X-Received: by 10.140.26.149 with SMTP id 21mr55203106qgv.51.1406069896862;
 Tue, 22 Jul 2014 15:58:16 -0700 (PDT)
Received: by 10.96.179.232 with HTTP; Tue, 22 Jul 2014 15:58:16 -0700 (PDT)
In-Reply-To: <CAM_a8JzDYmrp8z5ga3sD2dGnR_PNVhY1a72JpA=b6zUU0UbLvw@mail.gmail.com>
References: <CAM_a8JzDYmrp8z5ga3sD2dGnR_PNVhY1a72JpA=b6zUU0UbLvw@mail.gmail.com>
Date: Tue, 22 Jul 2014 15:58:16 -0700
Message-ID: <CAJVRA1Q5K2vQoXZ6PuY8oYkee9mrA=Kr__W1yj1A2PhLfh7HgQ@mail.gmail.com>
Subject: Fwd: a catalog of bugs, or "Why to disable assembly optimization"
To: cpunks <cypherpunks@cpunks.org>
Content-Type: text/plain; charset=UTF-8
X-BeenThere: cypherpunks@cpunks.org
X-Mailman-Version: 2.1.16
Precedence: list
List-Id: The Cypherpunks Mailing List <cypherpunks.cpunks.org>
List-Unsubscribe: <https://cpunks.org/mailman/options/cypherpunks>,
 <mailto:cypherpunks-request@cpunks.org?subject=unsubscribe>
List-Archive: <http://cpunks.org/pipermail/cypherpunks/>
List-Post: <mailto:cypherpunks@cpunks.org>
List-Help: <mailto:cypherpunks-request@cpunks.org?subject=help>
List-Subscribe: <https://cpunks.org/mailman/listinfo/cypherpunks>,
 <mailto:cypherpunks-request@cpunks.org?subject=subscribe>
Errors-To: cypherpunks-bounces@cpunks.org
Sender: "cypherpunks" <cypherpunks-bounces@cpunks.org>
From: coderman <coderman@gmail.com>
X-Gspam-Loop: antiproton.jfet.org
Status: O
Content-Length: 3781
Lines: 96

---------- Forwarded message ----------
From: Zooko Wilcox-OHearn <zooko@leastauthority.com>
Date: Tue, Jul 22, 2014 at 12:23 PM
Subject: a catalog of bugs, or "Why to disable assembly optimization"


Folks:

We had already agreed to disable assembly optimizations in pycryptopp,
because there seem to have been a lot of bugs in the optimized
assembly code in the past, and because the added speed really makes no
difference to our uses, as far as I know.

However, in order to explain and justify to other people (e.g. Debian
packagers) why we are doing this, and why they should consider doing
the same thing themselves, I just read through the entire history of
issues in pycryptopp and classified whether they were runtime errors
(and therefore potential security bugs) or build-time errors
(therefore probably not), and whether they would have been avoided if
we had been disabling assembly optimizations all along. Here are the
results. They clearly show that we should disable the optimized
assembly! About half of all the security-threatening bugs we've had
would never have been an issue if we'd avoided assembly from the
beginning.

By the way, in my opinion the author of Crypto++, Wei Dai, is an
*exceptionally* skilled, careful, and experienced coder, and I would
assume that if Crypto++ has had this many security-threatening bugs in
its optimized assembly code, then other crypto libraries that also use
optimized assembly code also have at least as many.

Here's the ticket to track this issue:

https://tahoe-lafs.org/trac/pycryptopp/ticket/85

bugs that cause run-time failures
=================================

(These bugs are potential security issues.)

* would have been avoided by DISABLE_ASM:
  - https://tahoe-lafs.org/trac/pycryptopp/ticket/24
  - https://tahoe-lafs.org/trac/pycryptopp/ticket/31
  - https://tahoe-lafs.org/trac/pycryptopp/ticket/45 (three
*different* bugs in the assembly implementation)
  - https://tahoe-lafs.org/trac/pycryptopp/ticket/67
  - https://tahoe-lafs.org/trac/pycryptopp/ticket/84
  - https://tahoe-lafs.org/trac/pycryptopp/ticket/86

* unclear if it would have been avoided if we'd used DISABLE_ASM:
  - https://tahoe-lafs.org/trac/pycryptopp/ticket/65

* would not have been avoided by DISABLE_ASM:
  - https://tahoe-lafs.org/trac/pycryptopp/ticket/17
  - https://tahoe-lafs.org/trac/pycryptopp/ticket/44
  - https://tahoe-lafs.org/trac/pycryptopp/ticket/83

* would not have been avoided by DISABLE_ASM (but would have been
avoided by using cffi instead of CPython API)
  - https://tahoe-lafs.org/trac/pycryptopp/ticket/19
  - https://tahoe-lafs.org/trac/pycryptopp/ticket/70
  - https://tahoe-lafs.org/trac/pycryptopp/ticket/80

* would have been avoided if we *didn't* use DISABLE_ASM! (A bug only
in the non-ASM version!)
  - https://tahoe-lafs.org/trac/pycryptopp/ticket/66


bugs that cause deterministic build or compilation failures
===========================================================

(These bugs are *typically* not potential security issues but they can
be, and in any case they are engineering/deployment issues.)

* would have been avoided by DISABLE_ASM:
  - https://tahoe-lafs.org/trac/pycryptopp/ticket/37
  - https://tahoe-lafs.org/trac/pycryptopp/ticket/96

* would not have been avoided by DISABLE_ASM:
  - https://tahoe-lafs.org/trac/pycryptopp/ticket/22
  - https://tahoe-lafs.org/trac/pycryptopp/ticket/23
  - https://tahoe-lafs.org/trac/pycryptopp/ticket/32
  - https://tahoe-lafs.org/trac/pycryptopp/ticket/39
  - https://tahoe-lafs.org/trac/pycryptopp/ticket/62
  - https://tahoe-lafs.org/trac/pycryptopp/ticket/77
  - https://tahoe-lafs.org/trac/pycryptopp/ticket/78


--
Regards,

Zooko Wilcox-O'Hearn

Founder, CEO, and Customer Support Rep
https://LeastAuthority.com
Freedom matters.

